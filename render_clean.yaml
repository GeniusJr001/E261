services:
  - type: web
    name: e261-voice-backend
    runtime: python3
    # Ensure Rust/Cargo uses writable /tmp during Render build and prefer binary wheels
    buildCommand: |
      export HOME=/tmp/build_home
      export CARGO_HOME=/tmp/.cargo
      export CARGO_TARGET_DIR=/tmp/.cargo-target
      export RUSTUP_HOME=/tmp/.rustup
      mkdir -p "$HOME" "$CARGO_HOME" "$CARGO_TARGET_DIR" "$RUSTUP_HOME"
      pip install --upgrade pip setuptools wheel
      # Prefer binary wheels to avoid building Rust extensions where possible
      pip install --prefer-binary -r requirements.txt
      chmod +x start.sh
    startCommand: "bash start.sh"
    plan: free
    env: python
    region: oregon
    env_vars:
      - key: PYTHON_VERSION
        value: "3.11.9"
      # Do NOT put real secrets here. Set them in Render Dashboard (Environment â†’ Secrets).
      - key: ELEVEN_API_KEY
        value: ""
      - key: ELEVEN_VOICE_ID
        value: ""
      - key: ZOHO_CLIENT_ID
        value: ""
      - key: ZOHO_CLIENT_SECRET
        value: ""
      - key: ZOHO_REFRESH_TOKEN
        value: ""
